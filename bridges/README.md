# qemu虚拟机使用桥接网络

### 快速开始

* 建立网桥，将网桥与一个实体网卡相连接
  
  * **注意!**
  ```
  1. 建立网桥后，你的网卡将通过网桥间接与外部相连接
  2. 正常情况下，在短暂的断连后，网桥和网卡将拥有相同的ip地址，机器能够恢复正常联网
  2. 特殊情况下，如果机器上的NetworkManager服务被关闭，网卡将不再有ip地址，机器的ip地址为网桥的ip地址，因此机器的ip地址会改变
  ```

  ``` bash
  ./enable-bridge.sh eth0(网卡名称)
  ```

* 开启两个qemu虚拟机，测试连接情况

  * 一号虚拟机
  ```
  ./qemu.sh -t tap0
  ``` 

  * 二号虚拟机
  ```
  ./qemu.sh -t tap1
  ```

  * 测试能否ping通

### 删除网桥

``` bash
./disable-bridge.sh eth0(网卡名称)
 ```

### problems

* 机器无法联网？

  1. 输入ifconfig，检查ip地址
     
     * br0的ip地址即为机器的ip地址

     * 连接br0的网卡的ip地址应该与br0相同，或者没有ip地址

  2. 如果ip地址不符合上述要求，先删除网桥，再重新建立 

  3. 如果ip地址符合要求，但仍然无法联网，请先考虑是否有其他原因
